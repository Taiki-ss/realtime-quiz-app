(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[498],{3604:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/quiz",function(){return t(3726)}])},6362:function(e,n,t){"use strict";t.d(n,{db:function(){return i}});var o=t(9739);try{o.Z.initializeApp({apiKey:"AIzaSyBC-StbzkUqLBGu0V4J3vjUuDbLbdL4yp4",authDomain:"steamship-gcp.firebaseapp.com",projectId:"steamship-gcp",storageBucket:"steamship-gcp.appspot.com",messagingSenderId:"129710370400",appId:"1:129710370400:web:e53f7415f3bbe73095dd05"})}catch(s){}var i=o.Z.firestore()},3726:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return m}});var o=t(7568),i=t(4051),s=t.n(i),r=t(5893),c=t(7294),a=t(1163),l=t(1673),u=t.n(l),d=t(6362),p=t(6775),h=t(5376);function f(e){var n={labels:["\u307f\u3093\u306a\u306e\u56de\u7b54"],datasets:[{label:"\u30101\u3011",data:[e.A],backgroundColor:"pink"},{label:"\u30102\u3011",data:[e.B],backgroundColor:"lightgreen"},{label:"\u30103\u3011",data:[e.C],backgroundColor:"yellow"},{label:"\u30104\u3011",data:[e.D],backgroundColor:"blue"}]};return(0,r.jsx)(h.$Q,{data:n,options:{scale:{ticks:{min:0,max:100,stepSize:10}}}})}p.kL.register(p.uw,p.f$,p.ZL,p.Dx,p.u,p.De);var x="users",_={A:1,B:2,C:3,D:4};function m(){var e=(0,a.useRouter)(),n=(e.query,e.query.userId),t=(0,c.useState)(0),i=t[0],l=t[1],p=(0,c.useState)({}),h=p[0],m=p[1],j=(0,c.useState)(""),b=(j[0],j[1],(0,c.useState)("F")),g=b[0],v=b[1],w=(0,c.useState)({}),k=w[0],y=w[1],C=(0,c.useState)({}),D=C[0],N=C[1],S=(0,c.useState)(10),B=S[0],E=S[1];(0,c.useEffect)((function(){0===B&&0!==i&&(0,o.Z)(s().mark((function e(){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={A:0,B:0,C:0,D:0},e.next=3,d.db.collection(x).get().then((function(e){e.docs.forEach((function(e,t){Object.keys(n).forEach((function(t){e.data().answered["q".concat(i)]===t&&(n[t]=n[t]+1)}))})),console.log(n),N(n)}));case 3:case"end":return e.stop()}}),e)})))()}),[B]),(0,c.useEffect)((function(){0!==i&&("F"===g&&0===B&&v("T"),0!==B&&setTimeout((function(){E(B-1)}),1e3))}),[B,i]),(0,c.useEffect)((function(){d.db.collection("currentQuestion").doc("currentQuestion").onSnapshot(function(){var e=(0,o.Z)(s().mark((function e(n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(n.data().currentQuestion),e.next=3,d.db.collection("questions").doc("question".concat(n.data().currentQuestion)).get().then((function(e){m(e.data())}));case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())}),[n]),(0,c.useEffect)((function(){d.db.collection(x).doc(n).get().then((function(e){console.log(e.data()),y(e.data()),e.data()&&(v(e.data().answered["q"+i]),E(10))}))}),[i,n]);var H=function(){var e=(0,o.Z)(s().mark((function e(t){var o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(o=k.answered)&&void 0!==k.point&&void 0!==k.time){e.next=3;break}return e.abrupt("return");case 3:return o["q".concat(i)]=t.target.value,v(t.target.value),e.next=7,d.db.collection(x).doc(n).set({answered:o,point:h.answer===t.target.value?k.point+1:k.point,time:k.time+B},{merge:!0});case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,r.jsxs)("div",{className:u().container,children:[(0,r.jsx)("figure",{style:{position:"fixed",right:"0",top:"0",width:"100px"},children:(0,r.jsx)("img",{src:"/engineer-king/images/logo.png",alt:""})}),(0,r.jsxs)("main",{className:u().main,children:[(0,r.jsxs)("div",{style:{display:0===i?"block":"none"},children:[(0,r.jsx)("h1",{children:"\u6e96\u5099\u306f\u3044\u3044\u304b\u306a\uff1f\uff1f"}),(0,r.jsx)("h2",{className:u().title,children:"\u30a8\u30f3\u30c8\u30ea\u30fc"}),(0,r.jsxs)("p",{children:["\u540d\u524d\uff1a",k?k.name:""]}),(0,r.jsxs)("p",{children:["\u6240\u5c5e\uff1a",k?k.porto:""]}),(0,r.jsxs)("p",{children:["\u8077\u7a2e\uff1a",k?k.role:""]}),(0,r.jsx)("br",{}),(0,r.jsx)("p",{children:"\u30b9\u30bf\u30fc\u30c8\u307e\u3067\u3053\u306e\u307e\u307e\u304a\u5f85\u3061\u304f\u3060\u3055\u3044"})]}),(0,r.jsxs)("div",{style:{display:i>0?"block":"none"},children:[(0,r.jsxs)("p",{children:[k?k.name:"","\u3055\u3093\u304c\u89e3\u7b54\u4e2d"]}),(0,r.jsxs)("p",{className:u().countdown,style:{color:"red"},children:["\u3042\u3068",(0,r.jsx)("span",{className:u().countdownno,children:B}),"\u79d2"]}),(0,r.jsxs)("h1",{className:u().title,children:["\u7b2c",i,"\u554f"]}),(0,r.jsx)("h2",{children:"F"!==g&&"T"!==g?"\u3042\u306a\u305f\u304c\u9078\u3093\u3060\u56de\u7b54\uff1a"+_[g]:"\u3042\u306a\u305f\u306f\u672a\u89e3\u7b54"}),(0,r.jsxs)("div",{style:{display:0===B&&void 0!==D.A?"block":"none"},children:[(0,r.jsx)(f,{A:D.A,B:D.B,C:D.C,D:D.D}),(0,r.jsxs)("ul",{style:{display:"flex",listStyle:"none",justifyContent:"space-around",padding:0},children:[(0,r.jsxs)("li",{children:["\u30101\u3011",D.A]}),(0,r.jsxs)("li",{children:["\u30102\u3011",D.B]}),(0,r.jsxs)("li",{children:["\u30103\u3011",D.C]}),(0,r.jsxs)("li",{children:["\u30104\u3011",D.D]})]})]}),(0,r.jsx)("div",{style:{display:"F"!==g||void 0===h?"none":"block"},children:(0,r.jsxs)("ul",{className:"answer-list",children:[(0,r.jsx)("li",{children:(0,r.jsx)("button",{value:"A",onClick:H,children:"1"})}),(0,r.jsx)("li",{children:(0,r.jsx)("button",{value:"B",onClick:H,children:"2"})}),(0,r.jsx)("li",{children:(0,r.jsx)("button",{value:"C",onClick:H,children:"3"})}),(0,r.jsx)("li",{children:(0,r.jsx)("button",{value:"D",onClick:H,children:"4"})})]})}),(0,r.jsx)("p",{children:"\u203b\u53f8\u4f1a\u304c\u5408\u56f3\u3092\u3057\u305f\u3089\u81ea\u52d5\u3067\u6b21\u306e\u554f\u984c\u306b\u9032\u307f\u307e\u3059"})]})]})]})}},1673:function(e){e.exports={container:"Home_container__97eC3",main:"Home_main__OVLM4",footer:"Home_footer__zed0_",title:"Home_title__q0Qg4",description:"Home_description__JhekB",countdown:"Home_countdown__chwDV",countdownno:"Home_countdownno__OOQln",code:"Home_code__2i1pD",grid:"Home_grid__npx0i",card:"Home_card__K7aTN",logo:"Home_logo__FLQOc"}}},function(e){e.O(0,[929,724,834,757,299,529,774,888,179],(function(){return n=3604,e(e.s=n);var n}));var n=e.O();_N_E=n}]);