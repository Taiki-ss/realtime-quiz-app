(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[498],{3604:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/quiz",function(){return t(3726)}])},6362:function(e,n,t){"use strict";t.d(n,{db:function(){return s}});var r=t(9739);try{r.Z.initializeApp({apiKey:"AIzaSyBC-StbzkUqLBGu0V4J3vjUuDbLbdL4yp4",authDomain:"steamship-gcp.firebaseapp.com",projectId:"steamship-gcp",storageBucket:"steamship-gcp.appspot.com",messagingSenderId:"129710370400",appId:"1:129710370400:web:e53f7415f3bbe73095dd05"})}catch(i){}var s=r.Z.firestore()},3726:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return j}});var r=t(7568),s=t(4051),i=t.n(s),o=t(5893),c=t(7294),a=t(1163),l=t(1673),u=t.n(l),d=t(6362),p=t(6775),f=t(5376);function h(e){var n={labels:["\u307f\u3093\u306a\u306e\u56de\u7b54"],datasets:[{label:"\u30101\u3011",data:[e.A],backgroundColor:"pink"},{label:"\u30102\u3011",data:[e.B],backgroundColor:"lightgreen"},{label:"\u30103\u3011",data:[e.C],backgroundColor:"yellow"},{label:"\u30104\u3011",data:[e.D],backgroundColor:"blue"}]};return(0,o.jsx)(f.$Q,{data:n,options:{scale:{ticks:{min:0,max:100,stepSize:10}}}})}p.kL.register(p.uw,p.f$,p.ZL,p.Dx,p.u,p.De);var x="testUsers",_={A:1,B:2,C:3,D:4};function j(){var e=(0,a.useRouter)(),n=(e.query,e.query.userId),t=(0,c.useState)(0),s=t[0],l=t[1],p=(0,c.useState)({}),f=p[0],j=p[1],m=(0,c.useState)(""),b=(m[0],m[1],(0,c.useState)("F")),v=b[0],g=b[1],k=(0,c.useState)({}),y=k[0],w=k[1],C=(0,c.useState)({}),S=C[0],D=C[1],N=(0,c.useState)(10),B=N[0],E=N[1];(0,c.useEffect)((function(){0===B&&0!==s&&(0,r.Z)(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={A:0,B:0,C:0,D:0},e.next=3,d.db.collection(x).get().then((function(e){e.docs.forEach((function(e,t){Object.keys(n).forEach((function(t){e.data().answered["q".concat(s)]===t&&(n[t]=n[t]+1)}))})),console.log(n),D(n)}));case 3:case"end":return e.stop()}}),e)})))()}),[B]),(0,c.useEffect)((function(){0!==s&&("F"===v&&0===B&&g("T"),0!==B&&setTimeout((function(){E(B-1)}),1e3))}),[B,s]),(0,c.useEffect)((function(){d.db.collection("currentQuestion").doc("currentQuestion").onSnapshot(function(){var e=(0,r.Z)(i().mark((function e(n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(n.data().currentQuestion),e.next=3,d.db.collection("questions").doc("question".concat(n.data().currentQuestion)).get().then((function(e){j(e.data())}));case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())}),[n]),(0,c.useEffect)((function(){d.db.collection(x).doc(n).get().then((function(e){console.log(e.data()),w(e.data()),e.data()&&(g(e.data().answered["q"+s]),E(10))}))}),[s,n]);var q=function(){var e=(0,r.Z)(i().mark((function e(t){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(r=y.answered)&&void 0!==y.point&&void 0!==y.time){e.next=3;break}return e.abrupt("return");case 3:return r["q".concat(s)]=t.target.value,g(t.target.value),e.next=7,d.db.collection(x).doc(n).set({answered:r,point:f.answer===t.target.value?y.point+1:y.point,time:y.time+B},{merge:!0});case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,o.jsx)("div",{className:u().container,children:(0,o.jsxs)("main",{className:u().main,children:[(0,o.jsxs)("div",{style:{display:0===s?"block":"none"},children:[(0,o.jsx)("h1",{children:"\u6e96\u5099\u306f\u3044\u3044\u304b\u306a\uff1f\uff1f"}),(0,o.jsx)("h2",{className:u().title,children:"\u30a8\u30f3\u30c8\u30ea\u30fc"}),(0,o.jsxs)("p",{children:["\u540d\u524d\uff1a",y?y.name:""]}),(0,o.jsxs)("p",{children:["\u6240\u5c5e\uff1a",y?y.porto:""]}),(0,o.jsxs)("p",{children:["\u8077\u7a2e\uff1a",y?y.role:""]}),(0,o.jsx)("br",{}),(0,o.jsx)("p",{children:"\u30b9\u30bf\u30fc\u30c8\u307e\u3067\u3053\u306e\u307e\u307e\u304a\u5f85\u3061\u304f\u3060\u3055\u3044"})]}),(0,o.jsxs)("div",{style:{display:s>0?"block":"none"},children:[(0,o.jsxs)("p",{children:[y?y.name:"","\u3055\u3093\u304c\u89e3\u7b54\u4e2d"]}),(0,o.jsxs)("p",{className:u().title,style:{color:"red"},children:["\u3042\u3068",B,"\u79d2"]}),(0,o.jsxs)("h1",{className:u().title,children:["\u7b2c",s,"\u554f"]}),(0,o.jsx)("h2",{children:"F"!==v&&"T"!==v?"\u3042\u306a\u305f\u304c\u9078\u3093\u3060\u56de\u7b54\uff1a"+_[v]:"\u3042\u306a\u305f\u306f\u672a\u89e3\u7b54"}),(0,o.jsxs)("div",{style:{display:0===B&&void 0!==S.A?"block":"none"},children:[(0,o.jsx)(h,{A:S.A,B:S.B,C:S.C,D:S.D}),(0,o.jsxs)("ul",{style:{display:"flex",listStyle:"none",justifyContent:"space-around"},children:[(0,o.jsxs)("li",{children:["\u30101\u3011",S.A,"\u4eba"]}),(0,o.jsxs)("li",{children:["\u30102\u3011",S.B,"\u4eba"]}),(0,o.jsxs)("li",{children:["\u30103\u3011",S.C,"\u4eba"]}),(0,o.jsxs)("li",{children:["\u30104\u3011",S.D,"\u4eba"]})]})]}),(0,o.jsx)("div",{style:{display:"F"!==v||void 0===f?"none":"block"},children:(0,o.jsxs)("ul",{className:"answer-list",children:[(0,o.jsx)("li",{children:(0,o.jsx)("button",{value:"A",onClick:q,children:"1"})}),(0,o.jsx)("li",{children:(0,o.jsx)("button",{value:"B",onClick:q,children:"2"})}),(0,o.jsx)("li",{children:(0,o.jsx)("button",{value:"C",onClick:q,children:"3"})}),(0,o.jsx)("li",{children:(0,o.jsx)("button",{value:"D",onClick:q,children:"4"})})]})}),(0,o.jsx)("p",{children:"\u203b\u53f8\u4f1a\u304c\u5408\u56f3\u3092\u3057\u305f\u3089\u81ea\u52d5\u3067\u6b21\u306e\u554f\u984c\u306b\u9032\u307f\u307e\u3059"})]})]})})}},1673:function(e){e.exports={container:"Home_container__97eC3",main:"Home_main__OVLM4",footer:"Home_footer__zed0_",title:"Home_title__q0Qg4",description:"Home_description__JhekB",code:"Home_code__2i1pD",grid:"Home_grid__npx0i",card:"Home_card__K7aTN",logo:"Home_logo__FLQOc"}}},function(e){e.O(0,[929,724,834,757,967,529,774,888,179],(function(){return n=3604,e(e.s=n);var n}));var n=e.O();_N_E=n}]);