(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[968],{39:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/result",function(){return n(6214)}])},6362:function(e,t,n){"use strict";n.d(t,{db:function(){return r}});var o=n(9739);try{o.Z.initializeApp({apiKey:"AIzaSyBC-StbzkUqLBGu0V4J3vjUuDbLbdL4yp4",authDomain:"steamship-gcp.firebaseapp.com",projectId:"steamship-gcp",storageBucket:"steamship-gcp.appspot.com",messagingSenderId:"129710370400",appId:"1:129710370400:web:e53f7415f3bbe73095dd05"})}catch(a){}var r=o.Z.firestore()},6214:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var o=n(7568),r=n(4051),a=n.n(r),c=n(5893),i=n(7294),l=n(1673),s=n.n(l),u=n(6362);function d(){var e=(0,i.useState)(!1),t=e[0],n=e[1],r=(0,i.useState)([]),l=r[0],d=r[1],m=(0,i.useState)(0),f=m[0],p=m[1],h=(0,i.useState)(!1),y=h[0],b=h[1],_=(0,i.useState)(!1),v=_[0],k=_[1],x=(0,i.useState)(5),g=x[0],S=x[1],j=(0,i.useState)(0),w=j[0],N=j[1];(0,i.useEffect)((function(){u.db.collection("result").doc("status").onSnapshot(function(){var e=(0,o.Z)(a().mark((function e(o){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(o.data().show),console.log(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),(0,i.useEffect)((function(){!1!==t&&(0,o.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.db.collection("testUsers").orderBy("point","desc").get().then((function(e){var t=[],n=1,o=0,r=0,a=0;e.docs.forEach((function(e,c){e.data().point!==r?(0!==c&&o++,r=e.data().point,t[o]={lank:n,point:r,member:[{name:e.data().name,porto:e.data().porto,role:e.data().role,time:e.data().time,count:a}]},n++,a++):(t[o].member.push({name:e.data().name,porto:e.data().porto,role:e.data().role,time:e.data().time,count:a}),n++,a++)})),console.log(t),d(t)}));case 2:case"end":return e.stop()}}),e)})))()}),[t]);var q=l.map((function(e){return e.member.map((function(t){return(0,c.jsxs)("tr",{className:1===e.lank?"late rank1":"late","data-count":t.count,children:[(0,c.jsxs)("td",{children:[e.lank,"\u4f4d"]}),(0,c.jsx)("td",{children:t.name}),(0,c.jsx)("td",{children:t.porto}),(0,c.jsx)("td",{children:t.role}),(0,c.jsxs)("td",{children:[e.point,"\u70b9"," ",(0,c.jsx)("span",{style:{display:"none"},children:1===e.lank?"(".concat(110-t.time,"\u79d2)"):""})]})]},t.count)}))}));return(0,c.jsxs)("div",{className:s().container,children:[(0,c.jsxs)("div",{children:["\u3042\u3068",w,"\u56de"]}),(0,c.jsx)("button",{onClick:function(){var e=15;document.querySelectorAll(".late").forEach((function(e){e.style.display="none"}));var t=document.querySelectorAll(".late").length,n=Math.floor(t/e),o=t%e;if(S(document.querySelectorAll(".rank1").length),y||0===o)if(n-f>1){var r=function(e){setTimeout((function(){document.querySelector('.late[data-count="'.concat(e,'"]')).style.display="table-row"}),100*a),a++};N(n-f);for(var a=0,c=e*(n-f)-1;c>=e*(n-f-1);c--)r(c);p(f+1)}else if(n-f!==1);else{var i=function(e){setTimeout((function(){document.querySelector('.late[data-count="'.concat(e,'"]')).style.display="table-row"}),100*l),l++};N(n-f);for(var l=0,s=e*(n-f)-1;s>=e*(n-f-1)+g;s--)i(s);k(!0)}else{for(var u=function(e){setTimeout((function(){document.querySelector('.late[data-count="'.concat(e,'"]')).style.display="table-row"}),100*d),d++},d=0,m=e*n+o-1;m>=e*n;m--)u(m);b(!0)}},style:{display:t&&!v?"block":"none"},children:"\u30e9\u30f3\u30ad\u30f3\u30b0\u8868\u793a"}),(0,c.jsx)("button",{onClick:function(){N(0);for(var e=g;e>0;e--)document.querySelector('.late[data-count="'.concat(e-1,'"]')).style.backgroundColor="skyblue",document.querySelector('.late[data-count="'.concat(e-1,'"]')).style.display="table-row"},style:{display:t&&v?"block":"none",backgroundColor:"pink"},children:"\uff11\u4f4d\u767a\u8868"}),(0,c.jsx)("button",{onClick:function(){if(void 0!==l[0].member){for(var e=0,t=0;t<l[0].member.length;t++)e<l[0].member[t].time&&(e=l[0].member[t].time);console.log(e),document.querySelectorAll(".rank1>td>span").forEach((function(t){Number(t.innerText.replace(/[^0-9$]/g,""))===110-e&&t.classList.add("No1"),t.style.display="inline-block"})),setTimeout((function(){document.querySelectorAll(".No1").forEach((function(e){e.parentNode.parentNode.style.backgroundColor="red"}))}),2e3)}},style:{display:t&&v?"block":"none",backgroundColor:"red"},children:"\u672c\u5f53\u306e\uff11\u4f4d\u767a\u8868"}),(0,c.jsxs)("main",{className:s().main,children:[(0,c.jsx)("h1",{className:s().title,children:"\u7d50\u679c\u767a\u8868"}),(0,c.jsx)("p",{children:t?"\u898b\u4e8b\u30a8\u30f3\u30b8\u30cb\u30a2\u738b\u306b\u8f1d\u3044\u305f\u306e\u306f\uff1f\uff1f":"\u307e\u3060\u6559\u3048\u306a\u3044\u3088\u301c\u3093"}),(0,c.jsx)("div",{className:"member-list-wrapper",children:(0,c.jsx)("table",{className:"member-list",children:(0,c.jsx)("tbody",{children:q})})})]})]})}},1673:function(e){e.exports={container:"Home_container__97eC3",main:"Home_main__OVLM4",footer:"Home_footer__zed0_",title:"Home_title__q0Qg4",description:"Home_description__JhekB",code:"Home_code__2i1pD",grid:"Home_grid__npx0i",card:"Home_card__K7aTN",logo:"Home_logo__FLQOc"}},7568:function(e,t,n){"use strict";function o(e,t,n,o,r,a,c){try{var i=e[a](c),l=i.value}catch(s){return void n(s)}i.done?t(l):Promise.resolve(l).then(o,r)}function r(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function i(e){o(c,r,a,i,l,"next",e)}function l(e){o(c,r,a,i,l,"throw",e)}i(void 0)}))}}n.d(t,{Z:function(){return r}})}},function(e){e.O(0,[929,724,834,967,774,888,179],(function(){return t=39,e(e.s=t);var t}));var t=e.O();_N_E=t}]);