(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[498],{3518:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/quiz",function(){return c(8873)}])},8873:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return m}});var d=c(5893),e=c(7294),f=c(1664),g=c.n(f),h=c(1163),i=c(214),j=c.n(i),k=c(9669),l=c.n(k);function m(){var a=(0,h.useRouter)().query.userId,b=(0,e.useState)(1),c=b[0],f=b[1],i=(0,e.useState)(""),k=i[0],m=i[1],n=(0,e.useState)(""),o=(n[0],n[1]),p=(0,e.useState)(!1),q=p[0],r=p[1],s=(0,e.useState)({}),t=s[0],u=s[1];(0,e.useEffect)(function(){return v},[c]);var v=function(){console.log("実行"),l().get("/api/question",{params:{param:"currentNum"}}).then(function(a){console.log(a.data),c!=a.data&&r(!1),f(a.data),w(a.data)}).catch(function(a){return console.log(a)})},w=function(a){l().get("/api/question",{params:{param:"getQuestion",qNum:a}}).then(function(b){console.log(b.data),m(b.data),o(b.answer),x(a)}).catch(function(a){return console.log(a)})},x=function(b){l().get("/api/user",{params:{userId:a}}).then(function(a){console.log(a.data),u(a.data),void 0!=a.data.answered["q".concat(b)]&& !0==a.data.answered["q".concat(b)]&&r(!0)})},y=function(b){if(confirm("回答は「".concat(b.target.value,"」でよろしいですか？\n解答をやり直すことはできません"))){r(!0);var d=t.answered;d["q".concat(c)]=!0,l().post("/api/user",{userId:a,answered:d,point:k.answer===b.target.value?t.point+1:t.point}).then(function(a){console.log(a)}).catch(function(a){console.log(a)})}};return(0,d.jsxs)("div",{className:j().container,children:[(0,d.jsxs)("p",{children:[t?t.userName:"","さんが解答中"]}),(0,d.jsx)("button",{style:{display:a?"block":"none",backgroundColor:"pink"},children:(0,d.jsx)(g(),{href:"/",children:"回答者選択へ戻る"})}),(0,d.jsxs)("main",{className:j().main,children:[(0,d.jsxs)("h1",{className:j().title,children:["第",c,"問"]}),(0,d.jsx)("h2",{children:q?"解答済み":"未解答"}),(0,d.jsx)("p",{children:k.question}),(0,d.jsx)("div",{style:{display:""==t.answered||q||!k.question?"none":"block"},children:(0,d.jsxs)("ul",{className:"answer-list",children:[(0,d.jsx)("li",{children:(0,d.jsx)("button",{value:"A",onClick:y,disabled:q,children:"A"})}),(0,d.jsx)("li",{children:(0,d.jsx)("button",{value:"B",onClick:y,disabled:q,children:"B"})}),(0,d.jsx)("li",{children:(0,d.jsx)("button",{value:"C",onClick:y,disabled:q,children:"C"})}),(0,d.jsx)("li",{children:(0,d.jsx)("button",{value:"D",onClick:y,disabled:q,children:"D"})})]})}),(0,d.jsx)("button",{onClick:v,style:{display:a?"block":"none",backgroundColor:"pink"},children:"問題を表示"}),(0,d.jsx)("p",{children:"※司会が合図をしてからしか次の問題には進めません"})]})]})}},214:function(a){a.exports={container:"Home_container__bCOhY",main:"Home_main__nLjiQ",footer:"Home_footer____T7K",title:"Home_title__T09hD",description:"Home_description__41Owk",code:"Home_code__suPER",grid:"Home_grid__GxQ85",card:"Home_card___LpL1",logo:"Home_logo__27_tb"}},1163:function(a,b,c){a.exports=c(387)}},function(a){a.O(0,[173,774,888,179],function(){var b;return a(a.s=3518)}),_N_E=a.O()}])